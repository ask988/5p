<!--
Educational Blog (Single-file, Beginner-friendly)
Features:
- Posts with categories & tags
- Category and tag filters
- Simple comment system (client-side via localStorage)
- Minimal CSS, vanilla JS

Save as: educational-blog.html and open in a browser.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>EduTech Blog — Technology & Learning</title>
  <style>
    /* Minimal and clear styles for beginners */
    body{font-family: Arial, sans-serif;margin:16px;background:#fafafa;color:#222}
    header{margin-bottom:18px}
    h1{margin:0 0 6px}
    .subtitle{color:#555;font-size:14px;margin:0}
    .layout{display:flex;gap:16px}
    .sidebar{flex:0 0 260px;background:#fff;padding:12px;border-radius:6px}
    .content{flex:1}
    .post{background:#fff;padding:14px;border-radius:6px;margin-bottom:12px}
    .meta{font-size:13px;color:#666;margin-bottom:6px}
    .tags{margin-top:8px}
    .tag{display:inline-block;padding:4px 8px;margin-right:6px;border-radius:4px;background:#eef}
    .btn{padding:8px 10px;border:none;border-radius:4px;cursor:pointer}
    .btn-primary{background:#2b8bea;color:#fff}
    label{display:block;margin-top:8px;font-weight:600}
    input,select,textarea{width:100%;padding:8px;box-sizing:border-box;margin-top:6px}
    .comment{border-top:1px solid #eee;padding-top:8px;margin-top:8px}
    .small{font-size:13px;color:#666}
    footer{margin-top:20px;font-size:13px;color:#666}
  </style>
</head>
<body>
  <header>
    <h1>EduTech Blog</h1>
    <p class="subtitle">Short guides, news and tutorials about technology & learning.</p>
  </header>

  <div class="layout">
    <aside class="sidebar">
      <h3 style="margin-top:0">Filters</h3>
      <label for="filter-category">Category</label>
      <select id="filter-category">
        <option value="all">All</option>
      </select>

      <label for="filter-tag">Tag</label>
      <select id="filter-tag">
        <option value="all">All</option>
      </select>

      <label for="search">Search</label>
      <input id="search" placeholder="Search titles or content">

      <div style="margin-top:10px">
        <button id="apply-filters" class="btn btn-primary">Apply</button>
        <button id="clear-filters" class="btn" style="margin-left:8px">Clear</button>
      </div>

      <hr>
      <h4>Categories</h4>
      <ul id="category-list" style="padding-left:18px;margin-top:6px"></ul>

      <h4 style="margin-top:12px">Tags</h4>
      <div id="tag-cloud" style="margin-top:6px"></div>
    </aside>

    <main class="content">
      <div id="posts"></div>

      <div class="post">
        <h3>Write a new post (demo)</h3>
        <p class="small">This demo allows adding posts in the browser for testing. Refresh will remove added posts unless you press "Save posts".</p>
        <label for="new-title">Title</label>
        <input id="new-title">
        <label for="new-category">Category</label>
        <input id="new-category" placeholder="e.g. Technology">
        <label for="new-tags">Tags (comma separated)</label>
        <input id="new-tags" placeholder="tutorial, ai">
        <label for="new-content">Content</label>
        <textarea id="new-content" rows="4"></textarea>
        <div style="margin-top:8px">
          <button id="add-post" class="btn btn-primary">Add Post</button>
          <button id="save-posts" class="btn" style="margin-left:8px">Save posts</button>
        </div>
      </div>

    </main>
  </div>

  <footer>
    <p class="small">Client-side demo: categories, tags and comments are stored in your browser (localStorage). Not for production.</p>
  </footer>

  <script>
    // ========== Sample posts ==========
    const SAMPLE_POSTS = [
      {id:'B1', title:'Intro to JavaScript', category:'Technology', tags:['javascript','web'], content:'JavaScript is the language of the web. This post covers basics like variables, functions and DOM.'},
      {id:'B2', title:'Healthy Study Habits', category:'Health', tags:['study','wellness'], content:'Good sleep, short breaks and active recall are key study habits.'},
      {id:'B3', title:'Personal Finance 101', category:'Finance', tags:['budgeting','saving'], content:'Start by tracking expenses, set a budget and build an emergency fund.'},
      {id:'B4', title:'Getting started with Machine Learning', category:'Technology', tags:['ai','ml'], content:'ML involves data, models and evaluation. Start with supervised learning.'}
    ];

    // Use saved posts if available
    let posts = JSON.parse(localStorage.getItem('edu_posts') || 'null') || SAMPLE_POSTS.slice();

    // Comments stored as map: postId -> array of comments
    let comments = JSON.parse(localStorage.getItem('edu_comments') || '{}');

    // Helpers to update sidebar lists
    function getCategories(allPosts){
      const s = new Set(allPosts.map(p=>p.category));
      return Array.from(s).sort();
    }
    function getTags(allPosts){
      const s = new Set();
      allPosts.forEach(p=>p.tags.forEach(t=>s.add(t)));
      return Array.from(s).sort();
    }

    // Render functions
    const postsEl = document.getElementById('posts');
    function renderPosts(list){
      postsEl.innerHTML = '';
      if(list.length===0){
        postsEl.innerHTML = '<p class="small">No posts found.</p>';
        return;
      }
      list.forEach(p=>{
        const el = document.createElement('div');
        el.className = 'post';
        el.innerHTML = `
          <h2>${escapeHtml(p.title)}</h2>
          <div class="meta">Category: ${escapeHtml(p.category)} • Tags: ${p.tags.map(t=>' <span class="tag">'+escapeHtml(t)+'</span>').join('')}</div>
          <p>${escapeHtml(p.content)}</p>
          <div class="comment-section" id="comments-${p.id}"></div>
        `;
        postsEl.appendChild(el);
        renderComments(p.id);
        addCommentForm(p.id, el);
      });
    }

    function renderSidebar(){
      const catSelect = document.getElementById('filter-category');
      const tagSelect = document.getElementById('filter-tag');
      const catList = document.getElementById('category-list');
      const tagCloud = document.getElementById('tag-cloud');

      const cats = getCategories(posts);
      const tags = getTags(posts);

      // fill selects
      catSelect.innerHTML = '<option value="all">All</option>' + cats.map(c=>`<option value="${c}">${c}</option>`).join('');
      tagSelect.innerHTML = '<option value="all">All</option>' + tags.map(t=>`<option value="${t}">${t}</option>`).join('');

      // list categories
      catList.innerHTML = cats.map(c=>`<li><button class="btn" style="padding:4px 6px;margin:4px 0" onclick="filterByCategory('${c}')">${c}</button></li>`).join('');

      // tag cloud
      tagCloud.innerHTML = tags.map(t=>`<button class="btn" style="padding:6px 8px;margin:4px 4px 0 0" onclick="filterByTag('${t}')">${t}</button>`).join('');
    }

    // Comments rendering
    function renderComments(postId){
      const container = document.getElementById('comments-'+postId);
      const list = comments[postId] || [];
      let html = '<h4 style="margin:6px 0">Comments</h4>';
      if(list.length===0){
        html += '<p class="small">No comments yet.</p>';
      } else {
        html += list.map(c=>`<div class="comment"><strong>${escapeHtml(c.name)}</strong> <span class="small">(${escapeHtml(c.email)})</span><p>${escapeHtml(c.text)}</p></div>`).join('');
      }
      container.innerHTML = html;
    }

    // Add comment form beneath each post
    function addCommentForm(postId, postEl){
      const form = document.createElement('div');
      form.innerHTML = `
        <h4 style="margin:8px 0 6px">Add a comment</h4>
        <label>Name</label>
        <input id="c-name-${postId}" placeholder="Your name">
        <label>Email</label>
        <input id="c-email-${postId}" placeholder="Email">
        <label>Comment</label>
        <textarea id="c-text-${postId}" rows="3"></textarea>
        <div style="margin-top:8px"><button class="btn btn-primary" onclick="submitComment('${postId}')">Submit</button></div>
      `;
      postEl.appendChild(form);
    }

    // Filtering and searching
    function applyFilters(){
      const cat = document.getElementById('filter-category').value;
      const tag = document.getElementById('filter-tag').value;
      const q = document.getElementById('search').value.trim().toLowerCase();

      let result = posts.slice();
      if(cat!=='all') result = result.filter(p=>p.category===cat);
      if(tag!=='all') result = result.filter(p=>p.tags.includes(tag));
      if(q) result = result.filter(p=> (p.title+p.content).toLowerCase().includes(q));
      renderPosts(result);
    }

    function clearFilters(){
      document.getElementById('filter-category').value='all';
      document.getElementById('filter-tag').value='all';
      document.getElementById('search').value='';
      renderPosts(posts);
    }

    function filterByCategory(c){
      document.getElementById('filter-category').value=c; applyFilters();
    }
    function filterByTag(t){
      document.getElementById('filter-tag').value=t; applyFilters();
    }

    // Comment submission
    function submitComment(postId){
      const name = document.getElementById('c-name-'+postId).value.trim();
      const email = document.getElementById('c-email-'+postId).value.trim();
      const text = document.getElementById('c-text-'+postId).value.trim();
      if(!name||!email||!text){ alert('Please fill all fields'); return; }
      if(!comments[postId]) comments[postId]=[];
      comments[postId].push({name,email,text,ts:Date.now()});
      localStorage.setItem('edu_comments', JSON.stringify(comments));
      renderComments(postId);
      // clear inputs
      document.getElementById('c-name-'+postId).value='';
      document.getElementById('c-email-'+postId).value='';
      document.getElementById('c-text-'+postId).value='';
    }

    // New post handling (demo)
    document.getElementById('add-post').addEventListener('click', function(){
      const title = document.getElementById('new-title').value.trim();
      const category = document.getElementById('new-category').value.trim()||'Uncategorized';
      const tags = document.getElementById('new-tags').value.split(',').map(s=>s.trim()).filter(Boolean);
      const content = document.getElementById('new-content').value.trim();
      if(!title || !content){ alert('Title and content required'); return; }
      const id = 'B' + (Math.floor(Math.random()*9000)+1000);
      posts.unshift({id,title,category,tags,content});
      renderSidebar(); renderPosts(posts);
      // clear inputs
      document.getElementById('new-title').value=''; document.getElementById('new-category').value=''; document.getElementById('new-tags').value=''; document.getElementById('new-content').value='';
    });

    document.getElementById('save-posts').addEventListener('click', function(){
      localStorage.setItem('edu_posts', JSON.stringify(posts));
      alert('Posts saved to localStorage. They will persist on this browser.');
    });

    // Utilities
    function escapeHtml(str){
      if(!str) return '';
      return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
    }

    // Expose functions needed by inline handlers
    window.filterByCategory = filterByCategory;
    window.filterByTag = filterByTag;
    window.submitComment = submitComment;

    // Initial render
    renderSidebar(); renderPosts(posts);

    // Buttons
    document.getElementById('apply-filters').addEventListener('click', applyFilters);
    document.getElementById('clear-filters').addEventListener('click', clearFilters);
  </script>
</body>
</html>
